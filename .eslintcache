[{"D:\\xampp\\htdocs\\seat-plan\\src\\components\\ViewSeatPlan.js":"1","D:\\xampp\\htdocs\\seat-plan\\src\\index.js":"2","D:\\xampp\\htdocs\\seat-plan\\src\\Login.js":"3","D:\\xampp\\htdocs\\seat-plan\\src\\Dashboard.js":"4","D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateSeatPlan.js":"5","D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateSeatPlanNew.js":"6","D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateFloor.js":"7","D:\\xampp\\htdocs\\seat-plan\\src\\components\\SeatPlanTableRow.js":"8"},{"size":8788,"mtime":1614237277731,"results":"9","hashOfConfig":"10"},{"size":616,"mtime":1614237030022,"results":"11","hashOfConfig":"10"},{"size":2750,"mtime":1614105080808,"results":"12","hashOfConfig":"10"},{"size":13876,"mtime":1614232695064,"results":"13","hashOfConfig":"10"},{"size":2406,"mtime":1614105080811,"results":"14","hashOfConfig":"10"},{"size":16955,"mtime":1614105080811,"results":"15","hashOfConfig":"10"},{"size":4260,"mtime":1614105080809,"results":"16","hashOfConfig":"10"},{"size":1863,"mtime":1614105080812,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"20","usedDeprecatedRules":"21"},"1lepqo6",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"28","messages":"29","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"30","messages":"31","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\xampp\\htdocs\\seat-plan\\src\\components\\ViewSeatPlan.js",["36","37","38","39","40","41","42","43","44"],"import React, { useState, useEffect } from \"react\";\r\nimport Axios from 'axios';\r\nimport \"./ViewSeatPlan.css\";\r\nimport TopNav from \"./TopNav\";\r\nimport SeatPlanTableRow from \"./SeatPlanTableRow\";\r\nimport Footer from \"./../Footer\";\r\n\r\nexport default function ViewSeatPlan(props) {\r\n    const [eiinNo, setEIIN] = useState(localStorage.getItem('eiin'));\r\n    const [examId, setExamId] = useState(\"\");\r\n    const [options, setOption] = useState([]);\r\n    const [rows, setRow] = useState([]); //for table tr\r\n    const [isDownloadVisible, setDownloadVisible] = useState(false);\r\n\r\n\r\n    //Get data on component load event\r\n    useEffect(() => {\r\n        let postData = new FormData();\r\n        // postData.append(\"eiin\", eiinNo);\r\n        postData.append(\"examId\", examId);\r\n        Axios.post(`${window.$baseUrl}/seat-plan/api/exam.php?action=list`, postData).then(response => {\r\n            const items = response.data;\r\n            let local_count = 0;\r\n            items.map((item) => {\r\n                local_count += 1;\r\n                setOption(options => [...options, <SelectOption key={local_count} id={item.id} name={item.name} />]);\r\n            })\r\n\r\n        }).catch(error => {\r\n            console.log(error);\r\n            alert(\"Something goes wrong. Please try again\");\r\n        }); //end of axios.\r\n    }, []); //end of useEffect\r\n\r\n    const selectOptions = options.map(item => (\r\n        item\r\n    ))\r\n\r\n    const tableRows = rows.map(item => (\r\n        item\r\n    ))\r\n\r\n\r\n    const [totalCapacity, setTotalCapacity] = useState(0);\r\n\r\n    //This function is passed to Building and called from there.\r\n    const roomDeleted = (value) => {\r\n        setRow([]);\r\n        setTotalCapacity(0);\r\n        let selectedExamId = document.getElementById(\"examIdCombo\").value;\r\n        let postData = new FormData();\r\n        postData.append(\"eiin\", eiinNo);\r\n        postData.append(\"examId\", selectedExamId);\r\n\r\n        Axios.post(`${window.$baseUrl}/seat-plan/api/view-seat-plan.php?action=list`, postData).then(response => {\r\n            const items = response.data;\r\n            let local_count = 0;\r\n            items.map((item) => {\r\n                local_count += 1;\r\n                setTotalCapacity(prevTotal => prevTotal + parseInt(item.capacity));\r\n                setRow(rows => [...rows, <SeatPlanTableRow roomDeleted={roomDeleted} key={item.id} id={item.id} b={item.building} f={item.floor} r={item.roomNo} startRoll={item.startRoll} endRoll={item.endRoll} total={item.capacity} />]);\r\n            })\r\n            // setCount(count => count + local_count);\r\n            //setCount(local_count);\r\n        }).catch(error => {\r\n            console.log(error);\r\n            alert(\"Something goes wrong. Please try again\");\r\n        }); //end of axios.\r\n\r\n    };\r\n\r\n    const examChanged = (e) => {\r\n        let examId = e.target.value;\r\n        if (examId == \"\") {\r\n            setRow([]);\r\n            setTotalCapacity(0);\r\n            setDownloadVisible(false);\r\n            return;\r\n        }\r\n        \r\n        let postData = new FormData();\r\n        postData.append(\"eiin\", eiinNo);\r\n        postData.append(\"examId\", examId);\r\n        Axios.post(`${window.$baseUrl}/seat-plan/api/view-seat-plan.php?action=list`, postData).then(response => {\r\n            const items = response.data;\r\n            let local_count = 0;\r\n            items.map((item) => {\r\n                local_count += 1;\r\n                setTotalCapacity(prevTotal => prevTotal + parseInt(item.capacity));\r\n                //setRow(rows => [...rows, <TableRow key={local_count} b={item.building} f={item.floor} r={item.roomNo} startRoll={item.startRoll} endRoll={item.endRoll} total={item.capacity} />]);\r\n\r\n                setRow(rows => [...rows, <SeatPlanTableRow roomDeleted={roomDeleted} key={item.id} id={item.id} b={item.building} f={item.floor} r={item.roomNo} startRoll={item.startRoll} endRoll={item.endRoll} total={item.capacity} />]);\r\n            })\r\n            // setCount(count => count + local_count);\r\n            //setCount(local_count);\r\n        }).catch(error => {\r\n            console.log(error);\r\n            alert(\"Something goes wrong. Please try again\");\r\n        }); //end of axios.\r\n\r\n        //make download button visible\r\n        setDownloadVisible(true);\r\n    }\r\n\r\n    const downloadClicked = (e)=>{\r\n        let selectedExamId = document.getElementById(\"examIdCombo\").value;\r\n        let postData = new FormData();\r\n        postData.append(\"eiin\", eiinNo);\r\n        postData.append(\"examId\", selectedExamId);\r\n\r\n        // axios({\r\n        //     method: 'post',\r\n        //     url: '/user/12345',\r\n        //     data: {\r\n        //       firstName: 'Fred',\r\n        //       lastName: 'Flintstone'\r\n        //     }\r\n        //   });\r\n\r\n        Axios({\r\n            url: `${window.$baseUrl}/seat-plan/api/csv.php`,\r\n            method: 'post',\r\n            // responseType: 'blob', // important\r\n            data : postData\r\n          }).then((response) => {\r\n            \r\n             const url = `${window.$baseUrl}/seat-plan/api/csv-files/${eiinNo}.csv`;\r\n             const link = document.createElement('a');\r\n             link.href = url;\r\n            link.target = \"_blank\";\r\n            link.setAttribute(\r\n                'download',\r\n                `Data.csv`,\r\n                );\r\n             document.body.appendChild(link);\r\n             link.click();\r\n            //  document.body.removeChild(link);\r\n            // Clean up and remove the link\r\n            link.parentNode.removeChild(link);\r\n\r\n\r\n          });\r\n\r\n        // Axios.post(`${window.$baseUrl}/seat-plan/api/csv.php`, postData).then(response => {\r\n        //     const items = response.data;\r\n        //     let local_count = 0;\r\n              \r\n            \r\n        // }).catch(error => {\r\n        //     console.log(error);\r\n        //     alert(\"Something goes wrong. Please try again\");\r\n        // }); //end of axios.\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"master-wrapper\">\r\n                <header style={{ marginBottom: \"0\", paddingTop: \"0\", boxShadow: \"none\" }}>\r\n                    <TopNav />\r\n                </header>\r\n                <main>\r\n                    {/* A good combobox here - https://react-select.com/home */}\r\n                    <h1>Seat Plan Details</h1>\r\n                    <div className=\"seatPlanCont box-shadow\">\r\n                        <select id=\"examIdCombo\" onChange={examChanged}>\r\n                            <option value=\"\">select an exam</option>\r\n                            {selectOptions}\r\n                        </select>\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Building</th>\r\n                                    <th>Floor</th>\r\n                                    <th>Room No.</th>\r\n                                    <th>Start Roll</th>\r\n                                    <th>End Roll</th>\r\n                                    <th>Total</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {tableRows}\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <td colSpan=\"5\">Grand Total = </td>\r\n                                    <td>{totalCapacity}</td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                        {\r\n                            isDownloadVisible && (\r\n                                <div className=\"downloadButton\" onClick={downloadClicked}>Download CSV</div>\r\n                            )\r\n                        }\r\n                        \r\n                    </div>\r\n                    \r\n                </main>\r\n                <footer>\r\n                    <Footer />\r\n                </footer>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction SelectOption(props) {\r\n    return (\r\n        <option value={props.id}>{props.name}</option>\r\n    );\r\n}\r\n\r\n// function TableRow(props){\r\n//     return(\r\n//         <tr>\r\n//             <td>\r\n//                 {props.b}\r\n//             </td>\r\n//             <td>\r\n//                 {props.f}\r\n//             </td>\r\n//             <td>\r\n//                 {props.r}\r\n//             </td>\r\n//             <td>\r\n//                 {props.startRoll==0?props.startRoll:\"-\"}\r\n//             </td>\r\n//             <td>\r\n//                 {props.endRoll==0?props.endRoll:\"-\"}\r\n//             </td>\r\n//             <td>\r\n//                 {props.total}\r\n//             </td>\r\n//         </tr>\r\n//     );\r\n// }",["45","46"],"D:\\xampp\\htdocs\\seat-plan\\src\\index.js",[],"D:\\xampp\\htdocs\\seat-plan\\src\\Login.js",[],"D:\\xampp\\htdocs\\seat-plan\\src\\Dashboard.js",["47","48","49","50","51"],"D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateSeatPlan.js",["52","53","54","55"],"D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateSeatPlanNew.js",["56","57","58","59","60","61","62","63","64"],"D:\\xampp\\htdocs\\seat-plan\\src\\components\\CreateFloor.js",["65"],"D:\\xampp\\htdocs\\seat-plan\\src\\components\\SeatPlanTableRow.js",["66"],{"ruleId":"67","severity":1,"message":"68","line":9,"column":20,"nodeType":"69","messageId":"70","endLine":9,"endColumn":27},{"ruleId":"67","severity":1,"message":"71","line":10,"column":20,"nodeType":"69","messageId":"70","endLine":10,"endColumn":29},{"ruleId":"72","severity":1,"message":"73","line":24,"column":30,"nodeType":"74","messageId":"75","endLine":24,"endColumn":32},{"ruleId":"76","severity":1,"message":"77","line":33,"column":8,"nodeType":"78","endLine":33,"endColumn":10,"suggestions":"79"},{"ruleId":"72","severity":1,"message":"73","line":58,"column":30,"nodeType":"74","messageId":"75","endLine":58,"endColumn":32},{"ruleId":"67","severity":1,"message":"80","line":59,"column":17,"nodeType":"69","messageId":"70","endLine":59,"endColumn":28},{"ruleId":"81","severity":1,"message":"82","line":74,"column":20,"nodeType":"83","messageId":"84","endLine":74,"endColumn":22},{"ruleId":"72","severity":1,"message":"73","line":87,"column":30,"nodeType":"74","messageId":"75","endLine":87,"endColumn":32},{"ruleId":"67","severity":1,"message":"80","line":88,"column":17,"nodeType":"69","messageId":"70","endLine":88,"endColumn":28},{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"67","severity":1,"message":"68","line":10,"column":20,"nodeType":"69","messageId":"70","endLine":10,"endColumn":27},{"ruleId":"72","severity":1,"message":"73","line":66,"column":30,"nodeType":"74","messageId":"75","endLine":66,"endColumn":32},{"ruleId":"76","severity":1,"message":"89","line":76,"column":8,"nodeType":"78","endLine":76,"endColumn":10,"suggestions":"90"},{"ruleId":"72","severity":1,"message":"73","line":96,"column":30,"nodeType":"74","messageId":"75","endLine":96,"endColumn":32},{"ruleId":"91","severity":1,"message":"92","line":275,"column":115,"nodeType":"93","endLine":275,"endColumn":126},{"ruleId":"67","severity":1,"message":"94","line":4,"column":10,"nodeType":"69","messageId":"70","endLine":4,"endColumn":18},{"ruleId":"67","severity":1,"message":"68","line":9,"column":20,"nodeType":"69","messageId":"70","endLine":9,"endColumn":27},{"ruleId":"72","severity":1,"message":"73","line":26,"column":30,"nodeType":"74","messageId":"75","endLine":26,"endColumn":32},{"ruleId":"76","severity":1,"message":"77","line":35,"column":8,"nodeType":"78","endLine":35,"endColumn":10,"suggestions":"95"},{"ruleId":"67","severity":1,"message":"94","line":4,"column":10,"nodeType":"69","messageId":"70","endLine":4,"endColumn":18},{"ruleId":"67","severity":1,"message":"96","line":4,"column":20,"nodeType":"69","messageId":"70","endLine":4,"endColumn":30},{"ruleId":"67","severity":1,"message":"97","line":4,"column":32,"nodeType":"69","messageId":"70","endLine":4,"endColumn":42},{"ruleId":"67","severity":1,"message":"68","line":107,"column":20,"nodeType":"69","messageId":"70","endLine":107,"endColumn":27},{"ruleId":"72","severity":1,"message":"73","line":142,"column":30,"nodeType":"74","messageId":"75","endLine":142,"endColumn":32},{"ruleId":"72","severity":1,"message":"73","line":158,"column":30,"nodeType":"74","messageId":"75","endLine":158,"endColumn":32},{"ruleId":"76","severity":1,"message":"89","line":168,"column":8,"nodeType":"78","endLine":168,"endColumn":10,"suggestions":"98"},{"ruleId":"72","severity":1,"message":"73","line":183,"column":30,"nodeType":"74","messageId":"75","endLine":183,"endColumn":32},{"ruleId":"67","severity":1,"message":"99","line":290,"column":13,"nodeType":"69","messageId":"70","endLine":290,"endColumn":22},{"ruleId":"76","severity":1,"message":"100","line":52,"column":9,"nodeType":"78","endLine":52,"endColumn":11,"suggestions":"101"},{"ruleId":"67","severity":1,"message":"102","line":7,"column":20,"nodeType":"69","messageId":"70","endLine":7,"endColumn":30},"no-unused-vars","'setEIIN' is assigned a value but never used.","Identifier","unusedVar","'setExamId' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'examId'. Either include it or remove the dependency array.","ArrayExpression",["103"],"'local_count' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-native-reassign",["104"],"no-negated-in-lhs",["105"],"React Hook useEffect has a missing dependency: 'eiinNo'. Either include it or remove the dependency array.",["106"],"react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'Redirect' is defined but never used.",["107"],"'withRouter' is defined but never used.","'useHistory' is defined but never used.",["108"],"'startRoll' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'location.state.buildingId', 'location.state.eiin', and 'location.state.examId'. Either include them or remove the dependency array.",["109"],"'setDisplay' is assigned a value but never used.",{"desc":"110","fix":"111"},"no-global-assign","no-unsafe-negation",{"desc":"112","fix":"113"},{"desc":"110","fix":"114"},{"desc":"112","fix":"115"},{"desc":"116","fix":"117"},"Update the dependencies array to be: [examId]",{"range":"118","text":"119"},"Update the dependencies array to be: [eiinNo]",{"range":"120","text":"121"},{"range":"122","text":"119"},{"range":"123","text":"121"},"Update the dependencies array to be: [location.state.buildingId, location.state.eiin, location.state.examId]",{"range":"124","text":"125"},[1317,1319],"[examId]",[3028,3030],"[eiinNo]",[1252,1254],[5618,5620],[2119,2121],"[location.state.buildingId, location.state.eiin, location.state.examId]"]